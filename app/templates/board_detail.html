{% extends "base.html" %}

{% block title %}Board {{ board.roman_number or 'Unnamed' }} - Cribbage Collection{% endblock %}

{% block content %}
<div class="mb-6">
  <a href="{{ url_for('index') }}" class="btn btn-secondary">
    <i class="fas fa-arrow-left"></i>
    Back to Collection
  </a>
</div>

<div class="card p-6 mb-6">
  <div class="flex items-start justify-between mb-4">
    <div>
      <h1 class="text-3xl font-bold text-gray-800 mb-2">Board {{ board.roman_number or 'Unnamed' }}</h1>
      {% if board.date %}
        <p class="text-lg text-gray-600 mb-2">Date: {{ board.date }}</p>
      {% endif %}
      {% if board.description %}
        <p class="text-gray-700">{{ board.description }}</p>
      {% endif %}
    </div>
    
    <div class="flex gap-2">
      <a href="{{ url_for('edit_board', board_id=board.id) }}" class="btn btn-primary">
        <i class="fas fa-edit"></i>
        Edit
      </a>
      <button class="btn btn-danger" onclick="confirmDelete('Board {{ board.roman_number or 'Unnamed' }}', '{{ url_for("delete_board", board_id=board.id) }}')">
        <i class="fas fa-trash"></i>
        Delete
      </button>
    </div>
  </div>

  <!-- Collection Status -->
  <div class="mb-6">
    <div class="grid grid-cols-2 gap-4">
      <div>
        <span class="text-gray-500 font-medium">Collection Status:</span>
        <span class="ml-2">
          {% if board.in_collection == 1 %}
            <span class="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">In Collection</span>
          {% else %}
            <span class="px-2 py-1 bg-red-100 text-red-800 rounded text-sm">Not in Collection</span>
          {% endif %}
        </span>
      </div>
      
      {% if board.date %}
        <div>
          <span class="text-gray-500 font-medium">Date:</span>
          <span class="text-gray-800 ml-2">{{ board.date }}</span>
        </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- Images -->
{% if board.image_front or board.image_back %}
  <div class="card p-6 mb-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Images</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% if board.image_front %}
        <div>
          <h3 class="text-sm font-medium text-gray-700 mb-2">Front</h3>
          <img src="{{ url_for('uploaded_file', filename=board.image_front) }}" 
               alt="Board {{ board.roman_number or 'Unnamed' }} - Front" class="w-full rounded-lg shadow-sm">
        </div>
      {% endif %}
      
      {% if board.image_back %}
        <div>
          <h3 class="text-sm font-medium text-gray-700 mb-2">Back</h3>
          <img src="{{ url_for('uploaded_file', filename=board.image_back) }}" 
               alt="Board {{ board.roman_number or 'Unnamed' }} - Back" class="w-full rounded-lg shadow-sm">
        </div>
      {% endif %}
    </div>
  </div>
{% endif %}

<!-- Material Information -->
{% if board.material_type or board.wood_type %}
  <div class="card p-6 mb-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Material</h2>
    <div class="space-y-3">
      {% if board.material_type %}
        <div class="flex justify-between">
          <span class="text-gray-600">Material Type:</span>
          <span class="font-medium">{{ board.material_type }}</span>
        </div>
      {% endif %}
      
      {% if board.wood_type %}
        <div class="flex justify-between">
          <span class="text-gray-600">Wood Type:</span>
          <span class="font-medium">{{ board.wood_type }}</span>
        </div>
      {% endif %}
    </div>
  </div>
{% endif %}

<!-- Gift Information -->
{% if board.is_gift == 1 %}
  <div class="card p-6 mb-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Gift Information</h2>
    <div class="space-y-3">
      <div class="flex justify-between">
        <span class="text-gray-600">Is Gift:</span>
        <span class="font-medium">Yes</span>
      </div>
      
      {% if board.gifted_to %}
        <div class="flex justify-between">
          <span class="text-gray-600">Gifted To:</span>
          <span class="font-medium">{{ board.gifted_to }}</span>
        </div>
      {% endif %}
      
      {% if board.gifted_from %}
        <div class="flex justify-between">
          <span class="text-gray-600">Gifted From:</span>
          <span class="font-medium">{{ board.gifted_from }}</span>
        </div>
      {% endif %}
    </div>
  </div>
{% endif %}

<script>
function confirmDelete(name, url) {
  if (confirm(`Are you sure you want to delete board "${name}"? This action cannot be undone.`)) {
    // Create a form and submit with POST method
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = url;
    document.body.appendChild(form);
    form.submit();
  }
}
</script>
{% endblock %}